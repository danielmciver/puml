@startuml

!include https://raw.githubusercontent.com/danielmciver/puml/main/theme.puml

!$data = {
	"ruleTypes": [
    {
        "name": "Queue Processor",
        "glyph": "<img:https://raw.githubusercontent.com/danielmciver/puml/main/pu_Queue-Listener.svg>" 
    }, {
        "name": "File",
        "glyph": "<img:https://raw.githubusercontent.com/danielmciver/puml/main/pu_File.svg>"
    }, {
        "name": "Files",
        "glyph": "<img:https://raw.githubusercontent.com/danielmciver/puml/main/pu_Files.svg>"
    }, {
        "name": "File Listener",
        "glyph": "<img:https://raw.githubusercontent.com/danielmciver/puml/main/pu_File-Listener.svg>"
	}, {
        "name": "Email Listener",
        "glyph": "<img:https://raw.githubusercontent.com/danielmciver/puml/main/pu_Email-Listener.svg>"
	}, {
		"name": "Data Transform",
		"glyph": "<img:https://raw.githubusercontent.com/danielmciver/puml/main/pu_Data-Transform.svg>"
	}, {
        "name": "When",
        "glyph": "<img:https://raw.githubusercontent.com/danielmciver/puml/main/pu_When.svg>"
	}, {
        "name": "Decision",
        "glyph": "<img:https://raw.githubusercontent.com/danielmciver/puml/main/pu_Decision.svg>"
	}, {
        "name": "Decision Table",
        "glyph": "<img:https://raw.githubusercontent.com/danielmciver/puml/main/pu_Decision-Table.svg>"
	}, {
        "name": "Decision Tree",
        "glyph": "<img:https://raw.githubusercontent.com/danielmciver/puml/main/pu_Decision-Tree.svg>"
	}, {
        "name": "Activity",
		"glyph": "<img:https://raw.githubusercontent.com/danielmciver/puml/main/pu_Activity.svg>"
	}, {
		"name": "Data Flow",
		"glyph": "<img:https://raw.githubusercontent.com/danielmciver/puml/main/pu_Data-Flow.svg>"
	}, {
		"name": "Service",
		"glyph": "<img:https://raw.githubusercontent.com/danielmciver/puml/main/pu_Boundary.svg>"
	}, {
        "name": "Connect",
		"glyph": "<img:https://raw.githubusercontent.com/danielmciver/puml/main/pu_Boundary.svg>"
	}, {	
		"name": "Page",
		"glyph": "<img:https://raw.githubusercontent.com/danielmciver/puml/main/pu_Page.svg>"
	}, {
        "name": "Page List",
		"glyph": "<img:https://raw.githubusercontent.com/danielmciver/puml/main/pu_Page-List.svg>"
    }, {
        "name": "Page Group",
		"glyph": "<img:https://raw.githubusercontent.com/danielmciver/puml/main/pu_Page-Group.svg>"
	}, {
		"name": "Data Page",
		"glyph": "<img:https://raw.githubusercontent.com/danielmciver/puml/main/pu_Data-Page.svg>"
	}, {
		"name": "Data Page List",
		"glyph": "<img:https://raw.githubusercontent.com/danielmciver/puml/main/pu_Data-Page-List.svg>"
    }, {
		"name": "Case",
		"glyph": "<img:https://raw.githubusercontent.com/danielmciver/puml/main/pu_Case.svg>"
	}, {
		"name": "Stage",
		"glyph": "<img:https://raw.githubusercontent.com/danielmciver/puml/main/pu_Stage.svg>"
	}, {	
		"name": "Flow",
		"glyph": "<img:https://raw.githubusercontent.com/danielmciver/puml/main/pu_Flow.svg>"
	}, {
		"name": "Flow Action",
		"glyph": "<img:https://raw.githubusercontent.com/danielmciver/puml/main/pu_Flow-Action.svg>"
	}, {
		"name": "SLA",
		"glyph": "<img:https://raw.githubusercontent.com/danielmciver/puml/main/pu_SLA.svg>"
	}, {	
		"name": "SLA Case",
		"glyph": "<img:https://raw.githubusercontent.com/danielmciver/puml/main/pu_SLA-Case.svg>"
	}, {	
		"name": "SLA Stage",
		"glyph": "<img:https://raw.githubusercontent.com/danielmciver/puml/main/pu_SLA-Stage.svg>"
	}, {	
		"name": "SLA Step",
		"glyph": "<img:https://raw.githubusercontent.com/danielmciver/puml/main/pu_SLA-Step.svg>"
	}, {	
		"name": "Property",
		"glyph": "<img:https://raw.githubusercontent.com/danielmciver/puml/main/pu_Property.svg>"
	}, {
		"name": "Text",
		"glyph": "<img:https://raw.githubusercontent.com/danielmciver/puml/main/pu_Property-Text.svg>"
	}, {
		"name": "Identifier",
		"glyph": "<img:https://raw.githubusercontent.com/danielmciver/puml/main/pu_Property-Identifier.svg>"
	}, {
		"name": "Password",
		"glyph": "<img:https://raw.githubusercontent.com/danielmciver/puml/main/pu_Property-Password.svg>"
	}, {
		"name": "Integer",
		"glyph": "<img:https://raw.githubusercontent.com/danielmciver/puml/main/pu_Property-Integer.svg>"
	}, {
		"name": "Decimal",
		"glyph": "<img:https://raw.githubusercontent.com/danielmciver/puml/main/pu_Property-Decimal.svg>"
	}, {	
		"name": "Double",
		"glyph": "<img:https://raw.githubusercontent.com/danielmciver/puml/main/pu_Property-Double.svg>"
	}, {	
		"name": "Date",
		"glyph": "<img:https://raw.githubusercontent.com/danielmciver/puml/main/pu_Property-Date.svg>"
	}, {
		"name": "Date Time",
		"glyph": "<img:https://raw.githubusercontent.com/danielmciver/puml/main/pu_Property-Time.svg>"
	}, {	
		"name": "Time Of Day",
		"glyph": "<img:https://raw.githubusercontent.com/danielmciver/puml/main/pu_Property-TimeOfDay.svg>"
	}, {		
		"name": "True/False",
		"glyph": "<img:https://raw.githubusercontent.com/danielmciver/puml/main/pu_Property-True-False.svg>"
	}, {		
		"name": "Encrypted",
		"glyph": "<img:https://raw.githubusercontent.com/danielmciver/puml/main/pu_Property-EncryptedText.svg>"
	}]
}

!unquoted function $getGlyph($ruleType)
  !foreach $rt in $data.ruleTypes
    !if $rt.name == $ruleType
      !return "<font color=#1F2555><size:32>" + $rt.glyph
    !endif
  !endfor
  !return ""
!endfunction

!unquoted function $stereoType($str)
  !return "<font color=#5C6ACC><U+00AB>" + $str + "<U+00BB>"
!endfunction

!procedure $pega($ruleType,$name,$detail="",$alias="",$glyph="<&random>")
  !if ($alias=="")
    !$alias = $name
  !endif

  !if ($ruleType=="Property" || $ruleType=="Text" || $ruleType=="Identifier" || $ruleType=="Password" || $ruleType=="Integer" || $ruleType=="Decimal" || $ruleType=="Double" || $ruleType=="Date Time" || $ruleType=="Date" || $ruleType=="Time Of Day" || $ruleType=="True/False" || $ruleType=="Encrypted" || $ruleType=="Time Of Day")

		participant $alias [
	      $getGlyph($ruleType)
	      //$stereoType($ruleType)//
	      ""$detail""
	      =.$name
		]  

	!elseif (($ruleType=="Page" || $ruleType=="Page List") && $detail!="")

		participant $alias [
	      $getGlyph($ruleType)
	      //$stereoType($ruleType) of// 
	      ""$detail""
	      =$name
		]
		
	!elseif ($detail=="")

		participant $alias [
	      $getGlyph($ruleType)
	      //$stereoType($ruleType)// 
	      =$name
		]

	!else
		participant $alias [
	      $getGlyph($ruleType)
	      //$stereoType($ruleType)//
	      ""$detail""
	      =$name
		]  
  !endif


!endprocedure

@enduml
